import{r as u,j as e,F as N,e as o}from"./index-9800cd28.js";import{u as F,b as P,d as G,c as H,A as w,C as U}from"./Home-b6604939.js";import{A,b as d,c as g}from"./Form-5b88c932.js";import{C as L}from"./Card-7e982f00.js";import{D as x,E as B,C as z}from"./DropdownButton-bb01cafe.js";const E=u.forwardRef(({bsPrefix:l,className:h,as:n="div",...a},r)=>{const m=F(l,"row"),C=P(),v=G(),f=`${m}-cols`,p=[];return C.forEach(s=>{const c=a[s];delete a[s];let t;c!=null&&typeof c=="object"?{cols:t}=c:t=c;const i=s!==v?`-${s}`:"";t!=null&&p.push(`${f}${i}-${t}`)}),e(n,{ref:r,...a,className:H(h,m,...p)})});E.displayName="Row";const S=E,M=()=>{const l=u.useRef(null),[h,n]=u.useState("choose"),[a,r]=u.useState("Choose"),[m,C]=u.useState(""),[v,f]=u.useState(""),[p,s]=u.useState(""),[c,t]=u.useState(!1),{addBin:i,refreshData:D,data:k}=w(),I=()=>{r(!0)},j=()=>{r(!1)};function $(R){if(R.preventDefault(),s(""),f(""),t(!0),!l.current.value||l.current.value.length<2)return s("Please choose a valid id for the Ben."),t(!1);let y=!1;if(k.some(b=>{if(b.id===l.current.value)return y=!0,!0}),y)return s("Provided ID already exists, please choose a unique id for the Ben."),t(!1);if(!["full","half","empty"].includes(h))return t(!1),s("Please select a valid level.");if(a==="Choose")return t(!1),s("Please select whether the bin is enabled or disabled.");const q={id:l==null?void 0:l.current.value,level:h,enabled:a,location:m};t(!1),i(q).then(b=>b.json()).then(b=>{b.status==="success"?(l.current.value="",n("Choose"),r("Choose"),C(""),f(b.message),setTimeout(()=>D(),1500)):s(b.message)}).catch(()=>{s("Couldn't process request due to unresolved issue")}).finally(()=>{t(!1)})}return{idRef:l,level:h,setLevel:n,enabled:a,enable:I,disable:j,loading:c,ErrorAlert:e(N,{children:p&&e(A,{variant:"danger",onClose:()=>s(""),dismissible:!0,children:p})}),SuccessAlert:e(N,{children:v&&e(A,{variant:"success",onClose:()=>f(""),dismissible:!0,children:v})}),handleAddBen:$,selectedLocation:m,setSelectedLocation:C}},X=()=>{const{locations:l}=w(),{idRef:h,level:n,setLevel:a,enabled:r,enable:m,disable:C,loading:v,ErrorAlert:f,SuccessAlert:p,handleAddBen:s,selectedLocation:c,setSelectedLocation:t}=M();return e(U,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:e("div",{className:"w-100",style:{maxWidth:"800px"},children:e(L,{className:"p-2",children:o(L.Body,{children:[e("h2",{className:"text-center mb-4",children:"Create a new Bin"}),p,f,o(d,{onSubmit:s,children:[o(S,{children:[e(g,{lg:6,md:6,s:6,xs:12,children:o(d.Group,{className:"mb-3",children:[e(d.Label,{children:"Ben ID"}),e(d.Control,{type:"id",ref:h,autoComplete:"id",required:!0})]})}),e(g,{lg:6,md:6,s:6,xs:12,children:o(d.Group,{className:"mb-3",children:[e(d.Label,{children:"Level"}),o(x,{title:n.charAt(0).toUpperCase()+String(n).slice(1),variant:n==="full"?"danger":n==="half"?"warning":n==="empty"?"success":"secondary",className:"mb-3",children:[e(B.Item,{onClick:i=>a("full"),children:"Full"}),e(B.Item,{onClick:i=>a("half"),children:"Half"}),e(B.Item,{onClick:i=>a("empty"),children:"Empty"})]}),"                                    "]})})]}),o(S,{children:[o(g,{lg:6,md:6,s:6,xs:12,children:[e(d.Label,{className:"mt-2",children:"Enabled/Disabled"}),o(x,{title:r==="Choose"?"Choose":r?"Enabled":"Disabled",variant:r==="Choose"?"secondary":r?"success":"danger",className:"mb-3",children:[e(B.Item,{onClick:m,children:"Enabled"}),e(B.Item,{onClick:C,children:"Disabled"})]})]}),o(g,{lg:6,md:6,s:6,xs:12,children:[e(d.Label,{className:"mt-2",children:"Location"}),e(x,{title:c||"Choose Location",variant:c?"primary":"secondary",className:"mb-3",children:l.map(i=>e(B.Item,{onClick:()=>t(i),children:i}))})]})]}),e("div",{className:"text-center",children:e(z,{disabled:v,className:"w-50 mt-3 mb-3",type:"submit",children:"Create Ben"})})]})]})})})})};export{X as default};
